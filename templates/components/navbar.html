<!-- Global Navigation Bar -->
<nav class="bg-gray-900 border-b border-gray-700 sticky top-0 z-40">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center h-16">
            <!-- Logo/Brand -->
            <div class="flex-shrink-0">
                <a href="{% url 'authentication:home' %}" class="text-2xl font-bold text-orange-500 hover:text-orange-400 transition duration-200">
                    BondUp
                </a>
            </div>

            <!-- Desktop Navigation -->
            <div class="hidden md:flex items-center space-x-1">
                {% if user.is_authenticated %}
                    <!-- Authenticated User Navigation -->
                    <a href="{% url 'authentication:profile' %}" class="px-3 py-2 rounded-md text-sm font-medium text-gray-300 hover:bg-gray-800 hover:text-white transition duration-200">
                        Home
                    </a>
                    <a href="{% url 'partner_matching:browse_user' %}" class="px-3 py-2 rounded-md text-sm font-medium text-gray-300 hover:bg-gray-800 hover:text-white transition duration-200">
                        Find Partners
                    </a>
                    <!-- Discover Event Dropdown -->
                    <div class="relative group">
                        <button class="px-3 py-2 rounded-md text-sm font-medium text-gray-300 hover:bg-gray-800 hover:text-white transition duration-200 flex items-center space-x-1">
                            <span>Discover Event</span>
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </button>
                        <!-- Dropdown Menu -->
                        <div class="absolute left-0 mt-0 w-48 bg-gray-800 rounded-md shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition duration-200 z-50">
                            <a href="{% url 'event_discovery:show_event' %}" class="block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 hover:text-white rounded-t-md">
                                Find Event
                            </a>
                            <a href="{% url 'event_discovery:show_my_event' %}" class="block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 hover:text-white rounded-b-md">
                                Joined Event
                            </a>
                        </div>
                    </div>
                    <a href="{% url 'event_management:my_events' %}" class="px-3 py-2 rounded-md text-sm font-medium text-gray-300 hover:bg-gray-800 hover:text-white transition duration-200">
                        Manage Event
                    </a>
                    <a href="{% url 'leaderboard:leaderboard' %}" class="px-3 py-2 rounded-md text-sm font-medium text-gray-300 hover:bg-gray-800 hover:text-white transition duration-200">
                        Leaderboard
                    </a>
                {% else %}
                    <!-- Unauthenticated User Navigation -->
                    <a href="{% url 'authentication:home' %}" class="px-3 py-2 rounded-md text-sm font-medium text-gray-300 hover:bg-gray-800 hover:text-white transition duration-200">
                        Home
                    </a>
                    <a href="{% url 'authentication:login' %}" class="px-3 py-2 rounded-md text-sm font-medium text-gray-300 hover:bg-gray-800 hover:text-white transition duration-200">
                        Sign In
                    </a>
                    <a href="{% url 'authentication:register' %}" class="px-3 py-2 rounded-md text-sm font-medium bg-orange-500 text-white hover:bg-orange-600 transition duration-200">
                        Get Started
                    </a>
                {% endif %}
            </div>

            <!-- User Menu / Mobile Menu Button -->
            <div class="flex items-center space-x-4">
                {% if user.is_authenticated %}
                    <!-- User Profile Dropdown -->
                    <div class="relative group">
                        <button class="flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium text-gray-300 hover:bg-gray-800 hover:text-white transition duration-200">
                            <span>{{ user.username }}</span>
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path>
                            </svg>
                        </button>
                        <!-- Dropdown Menu -->
                        <div class="absolute right-0 mt-0 w-48 bg-gray-800 rounded-md shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition duration-200 z-50">
                            <a href="{% url 'authentication:profile' %}" class="block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 hover:text-white rounded-t-md">
                                My Profile
                            </a>
                            <a href="{% url 'authentication:sport_preferences' %}" class="block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 hover:text-white">
                                Sport Preferences
                            </a>
                            <a href="{% url 'partner_matching:connections' %}" class="block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 hover:text-white">
                                My Connections
                            </a>
                            <hr class="border-gray-700">
                            <a href="{% url 'authentication:logout' %}" class="block px-4 py-2 text-sm text-red-400 hover:bg-gray-700 hover:text-red-300 rounded-b-md">
                                Sign Out
                            </a>
                        </div>
                    </div>
                {% endif %}

                <!-- Mobile Menu Button -->
                <button id="mobile-menu-btn" class="md:hidden inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-800 focus:outline-none transition duration-200">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Mobile Navigation Menu -->
        <div id="mobile-menu" class="hidden md:hidden pb-3 space-y-1">
            {% if user.is_authenticated %}
                <a href="{% url 'authentication:profile' %}" class="block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:bg-gray-800 hover:text-white transition duration-200">
                    Home
                </a>
                <a href="{% url 'partner_matching:browse_user' %}" class="block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:bg-gray-800 hover:text-white transition duration-200">
                    Find Partners
                </a>
                <!-- Discover Event Section -->
                <div class="pl-3">
                    <p class="px-3 py-2 text-sm font-semibold text-gray-400">Discover Event</p>
                    <a href="{% url 'event_discovery:show_event' %}" class="block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:bg-gray-800 hover:text-white transition duration-200">
                        Find Event
                    </a>
                    <a href="{% url 'event_discovery:show_my_event' %}" class="block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:bg-gray-800 hover:text-white transition duration-200">
                        Joined Event
                    </a>
                </div>
                <a href="{% url 'event_management:my_events' %}" class="block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:bg-gray-800 hover:text-white transition duration-200">
                    Manage Event
                </a>
                <a href="{% url 'leaderboard:leaderboard' %}" class="block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:bg-gray-800 hover:text-white transition duration-200">
                    Leaderboard
                </a>
                <hr class="border-gray-700 my-2">
                <a href="{% url 'authentication:profile' %}" class="block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:bg-gray-800 hover:text-white transition duration-200">
                    My Profile
                </a>
                <a href="{% url 'authentication:sport_preferences' %}" class="block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:bg-gray-800 hover:text-white transition duration-200">
                    Sport Preferences
                </a>
                <a href="{% url 'partner_matching:connections' %}" class="block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:bg-gray-800 hover:text-white transition duration-200">
                    My Connections
                </a>
                <a href="{% url 'authentication:logout' %}" class="block px-3 py-2 rounded-md text-base font-medium text-red-400 hover:bg-gray-800 hover:text-red-300 transition duration-200">
                    Sign Out
                </a>
            {% else %}
                <a href="{% url 'authentication:home' %}" class="block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:bg-gray-800 hover:text-white transition duration-200">
                    Home
                </a>
                <a href="{% url 'authentication:login' %}" class="block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:bg-gray-800 hover:text-white transition duration-200">
                    Sign In
                </a>
                <a href="{% url 'authentication:register' %}" class="block px-3 py-2 rounded-md text-base font-medium bg-orange-500 text-white hover:bg-orange-600 transition duration-200">
                    Get Started
                </a>
            {% endif %}
        </div>
    </div>
</nav>

<script>
    // Mobile menu toggle
    document.getElementById('mobile-menu-btn').addEventListener('click', function() {
        const menu = document.getElementById('mobile-menu');
        menu.classList.toggle('hidden');
    });
</script>

